<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SkillForge ¬∑ welcome back</title>
  <!-- Bootstrap icons & grid (layout only) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  <!-- fonts & AOS -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css" />
  <!-- Font Awesome (optional extra icons) -->
  <script src="https://kit.fontawesome.com/1b30ffa950.js" crossorigin="anonymous"></script>
  <style>
    /* ---------- GLOBAL STYLES (same as index/paths) ---------- */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Outfit', sans-serif;
      background: #f4f9fc;
      color: #1c2e3f;
      line-height: 1.5;
      overflow-x: hidden;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    :root {
      --fog-deep: #0f2b3c;        /* deep navy ‚Äì trust */
      --fog-mid: #2b5f6b;          /* tealish blue ‚Äì calm */
      --fog-soft: #e5f0f5;         /* background */
      --mist-green: #7fc3b0;       /* soft green ‚Äì growth */
      --accent-glow: #ffb347;       /* warm amber ‚Äì energy */
      --card-white: rgba(255,255,255,0.85);
      --backdrop-blur: blur(12px);
      --border-radius-lg: 60px;
      --border-radius-md: 40px;
      --border-radius-sm: 24px;
      --box-shadow-light: 0 30px 40px -30px rgba(0,0,0,0.2);
    }

    /* ---------- scroll orb (FIXED: highest z-index, appears above everything) ---------- */
    #orb-scroll {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 70px;
      height: 70px;
      border-radius: 50% 20% 50% 50%;
      background: rgba(127, 195, 176, 0.3);
      backdrop-filter: blur(16px) saturate(180%);
      border: 2px solid rgba(255,255,255,0.5);
      box-shadow: 0 20px 40px rgba(0,80,70,0.4), 0 0 0 6px rgba(255,255,255,0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 2.2rem;
      cursor: pointer;
      transition: 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
      opacity: 0;
      visibility: hidden;
      z-index: 10000; /* Ultra-high z-index to appear above everything */
    }
    #orb-scroll.visible { opacity: 1; visibility: visible; }
    #orb-scroll:hover {
      border-radius: 40% 40% 50% 20%;
      background: #7fc3b0;
      transform: rotate(10deg) scale(1.2);
      border-color: #ffb347;
    }

    /* When assistant is open, ensure orb stays on top */
    body.assistant-open #orb-scroll {
      z-index: 10000; /* Maintain highest z-index even when assistant is open */
    }

    /* ---------- custom navbar (exact copy from paths) ---------- */
    .nav-fog {
      background: rgba(15, 43, 60, 0.7);
      backdrop-filter: blur(18px);
      position: fixed;
      width: 100%;
      top: 0;
      z-index: 1000;
      padding: 0.6rem 2rem;
      border-bottom: 2px solid rgba(127, 195, 176, 0.3);
    }
    .nav-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      max-width: 1400px;
      margin: 0 auto;
    }
    .logo-block {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .logo-block img {
      height: 48px;
      filter: drop-shadow(0 4px 8px #7fc3b0);
    }
    .logo-text {
      font-size: 1.9rem;
      font-weight: 800;
      background: linear-gradient(130deg, #ffffff, #b8e3d9);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      letter-spacing: 2px;
    }
    .nav-links {
      display: flex;
      gap: 0.4rem;
      list-style: none;
      margin: 0;
    }
    .nav-links a {
      text-decoration: none;
      color: rgba(255,255,255,0.85);
      font-weight: 500;
      padding: 0.6rem 1.4rem;
      border-radius: 50px;
      transition: 0.25s;
      font-size: 1.05rem;
    }
    .nav-links a:hover {
      background: #7fc3b0;
      color: #0f2b3c;
      transform: translateY(-3px);
    }
    .nav-cta a {
      background: white;
      color: #0f2b3c !important;
      font-weight: 700;
      padding: 0.6rem 2rem;
      border-radius: 60px;
      border: 2px solid #ffb347;
      text-decoration: none;
    }
    .nav-cta a:hover { background: #ffb347; color: #0f2b3c !important; border-color: white; }
    .mobile-toggle {
      display: none;
      background: transparent;
      border: 2px solid #7fc3b0;
      color: white;
      font-size: 2rem;
      border-radius: 40px;
      padding: 0.2rem 1rem;
      cursor: pointer;
    }
    @media (max-width: 1024px) {
      .mobile-toggle { display: block; }
      .nav-links {
        display: none;
        flex-direction: column;
        background: rgba(15,43,60,0.95);
        backdrop-filter: blur(20px);
        position: absolute;
        top: 85px;
        left: 5%;
        width: 90%;
        border-radius: 40px;
        padding: 2rem;
        z-index: 999;
      }
      .nav-links.show { display: flex; }
      .nav-links a { text-align: center; }
    }

    /* ---------- footer (exact copy from paths) ---------- */
    .footer-fog {
      background: #0f2b3c;
      color: #e5f0f5;
      padding: 4rem 5% 2rem;
      border-top: 8px solid #7fc3b0;
      margin-top: auto;
    }
    .footer-fog a { color: #b0d9cc; text-decoration: none; }
    .footer-fog a:hover { color: #ffb347; }

    /* ---------- global btn-mist etc (preserved) ---------- */
    .btn-mist {
      background: #7fc3b0; border: none; padding: 1rem 2.5rem; border-radius: 60px;
      font-weight: 700; color: #0f2b3c; text-decoration: none; transition: 0.3s;
      box-shadow: 0 12px 20px -10px #7fc3b0; display: inline-block;
    }
    .btn-mist:hover { background: #ffb347; transform: scale(1.03); }

    /* ---------- MAIN CONTENT AREA (signin card) ---------- */
    main {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 7rem 1.5rem 3rem;
      position: relative;
      transition: padding-right 0.3s ease;
    }

    body.assistant-open main {
      padding-right: 380px; /* space for assistant panel */
    }

    /* subtle background pattern (safe, premium) */
    main::before {
      content: "";
      position: absolute;
      inset: 0;
      background-image: radial-gradient(rgba(127,195,176,0.08) 1px, transparent 1px);
      background-size: 30px 30px;
      pointer-events: none;
    }

    /* ---------- SIGNIN CARD (GLASS) ---------- */
    .signin-card {
      max-width: 480px;
      width: 100%;
      background: rgba(255, 255, 255, 0.75);
      backdrop-filter: blur(16px) saturate(180%);
      -webkit-backdrop-filter: blur(16px) saturate(180%);
      border-radius: 60px;
      padding: 3rem 2.5rem;
      box-shadow: 
        0 40px 60px -30px rgba(15, 60, 70, 0.35),
        0 0 0 1px rgba(127, 195, 176, 0.25) inset,
        0 20px 40px -20px rgba(0,0,0,0.2);
      border: 1px solid rgba(255,255,255,0.5);
      transition: transform 0.3s ease, box-shadow 0.4s ease;
      animation: cardFloat 0.6s ease-out;
      position: relative;
      z-index: 2;
    }

    @keyframes cardFloat {
      0% { opacity: 0; transform: translateY(12px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    .signin-card:hover {
      box-shadow: 0 50px 70px -30px #1a4b5a, 0 0 0 1px #7fc3b0 inset;
    }

    /* header */
    .brand-header {
      text-align: center;
      margin-bottom: 2.5rem;
    }

    .brand-icon {
      font-size: 3.2rem;
      color: #7fc3b0;
      background: rgba(127,195,176,0.12);
      width: 90px;
      height: 90px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1.2rem;
      border: 2px solid rgba(127,195,176,0.3);
      transition: 0.3s;
    }

    .brand-icon i {
      filter: drop-shadow(0 4px 6px rgba(0,0,0,0.05));
    }

    h1 {
      font-size: 2.3rem;
      font-weight: 600;
      letter-spacing: -0.02em;
      color: #0f2f3f;
      margin-bottom: 0.25rem;
    }

    .welcome-tag {
      color: #2f5f6b;
      font-size: 1.1rem;
      font-weight: 400;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .welcome-tag i {
      color: #7fc3b0;
    }

    /* ---------- FORM ---------- */
    .input-group {
      margin-bottom: 2rem;
      position: relative;
    }

    .field-container {
      position: relative;
      margin-top: 0.5rem;
    }

    .field-container input {
      width: 100%;
      padding: 1.2rem 1.8rem;
      border: 2px solid rgba(127,195,176,0.25);
      border-radius: 50px;
      font-size: 1.1rem;
      background: rgba(255,255,255,0.7);
      transition: all 0.2s ease;
      font-family: 'Outfit', sans-serif;
      color: #0f2f3f;
    }

    .field-container input:focus {
      outline: none;
      border-color: #7fc3b0;
      box-shadow: 0 0 0 5px rgba(127,195,176,0.2);
      background: white;
    }

    .field-container label {
      position: absolute;
      left: 1.8rem;
      top: 50%;
      transform: translateY(-50%);
      background: transparent;
      padding: 0 0.2rem;
      color: #5f7e8b;
      font-weight: 500;
      pointer-events: none;
      transition: 0.2s ease;
      font-size: 1rem;
      letter-spacing: 0.01em;
    }

    .field-container.float label {
      top: 0;
      transform: translateY(-50%) scale(0.9);
      background: rgba(255,255,255,0.9);
      backdrop-filter: blur(4px);
      color: #2b5f6b;
      font-weight: 600;
      padding: 0 0.6rem;
      left: 1.2rem;
    }

    .password-toggle {
      position: absolute;
      right: 1.8rem;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: #5f7e8b;
      font-size: 1.3rem;
      cursor: pointer;
      padding: 0.2rem;
      z-index: 5;
      transition: color 0.2s;
    }

    .password-toggle:hover {
      color: #7fc3b0;
    }

    .validation-feedback {
      font-size: 0.9rem;
      margin-top: 0.5rem;
      margin-left: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.4rem;
      color: #e67e4a;
      min-height: 1.8rem;
    }

    .validation-feedback.valid {
      color: #3c9b7a;
    }

    .validation-feedback i {
      font-size: 1rem;
    }

    .row-flex {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin: 1.8rem 0 2.2rem;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .checkbox-wrapper {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      cursor: pointer;
      font-weight: 500;
      color: #1e4b5a;
    }

    .checkbox-wrapper input[type="checkbox"] {
      width: 1.3rem;
      height: 1.3rem;
      accent-color: #7fc3b0;
      border-radius: 6px;
      cursor: pointer;
    }

    .forgot-link {
      color: #2b5f6b;
      text-decoration: none;
      font-weight: 600;
      border-bottom: 2px solid transparent;
      transition: 0.2s;
    }

    .forgot-link:hover {
      border-bottom-color: #7fc3b0;
      color: #0f2f3f;
    }

    .signin-btn {
      width: 100%;
      background: #7fc3b0;
      border: none;
      border-radius: 60px;
      padding: 1.2rem;
      font-size: 1.4rem;
      font-weight: 700;
      color: #0f2f3f;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.8rem;
      box-shadow: 0 15px 25px -12px #7fc3b0;
      transition: all 0.2s cubic-bezier(0.2,0.9,0.4,1);
      cursor: pointer;
      margin-bottom: 2rem;
    }

    .signin-btn:hover {
      background: #ffb347;
      transform: scale(1.02);
      box-shadow: 0 20px 30px -12px #b38b4a;
    }

    .signin-btn:active {
      transform: scale(0.98);
    }

    .signin-btn i {
      font-size: 1.5rem;
    }

    .spinner {
      width: 1.5rem;
      height: 1.5rem;
      border: 3px solid rgba(15,47,63,0.2);
      border-top-color: #0f2f3f;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    .trust-badge {
      background: rgba(127,195,176,0.1);
      border-radius: 60px;
      padding: 0.9rem 1.2rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      font-size: 0.95rem;
      color: #1a4b5a;
      margin-bottom: 2rem;
      border: 1px solid rgba(127,195,176,0.3);
    }

    .trust-badge i {
      font-size: 1.8rem;
      color: #7fc3b0;
    }

    .signup-redirect {
      text-align: center;
      font-size: 1.1rem;
    }

    .signup-redirect a {
      color: #7fc3b0;
      font-weight: 700;
      text-decoration: none;
      border-bottom: 2px solid transparent;
      transition: 0.2s;
    }

    .signup-redirect a:hover {
      border-bottom-color: #7fc3b0;
      color: #0f2f3f;
    }

    .global-message {
      background: #fdede5;
      border-radius: 60px;
      padding: 1rem 1.5rem;
      margin-bottom: 2rem;
      display: flex;
      align-items: center;
      gap: 0.8rem;
      color: #b84a2c;
      border-left: 8px solid #e67e4a;
      animation: shake 0.4s ease;
    }

    .global-message.success {
      background: #e0f2e9;
      color: #1f6e4f;
      border-left-color: #3c9b7a;
    }

    @keyframes shake {
      0%,100% { transform: translateX(0); }
      20% { transform: translateX(-6px); }
      40% { transform: translateX(6px); }
      60% { transform: translateX(-3px); }
      80% { transform: translateX(3px); }
    }

    .strength-meter {
      height: 4px;
      background: rgba(0,0,0,0.05);
      border-radius: 4px;
      margin: 0.5rem 1rem 0;
      overflow: hidden;
      width: calc(100% - 2rem);
    }

    .strength-fill {
      height: 100%;
      width: 0%;
      background: #ffb347;
      transition: width 0.3s;
    }

    .returning-greeting {
      background: #eef7f2;
      border-radius: 40px;
      padding: 0.8rem 1.5rem;
      margin-bottom: 2rem;
      display: flex;
      align-items: center;
      gap: 0.7rem;
      font-weight: 500;
    }

    /* ---------- SECURITY ASSISTANT PANEL (glass, premium) ---------- */
    .assistant-toggle {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background: #7fc3b0;
      border: 3px solid white;
      box-shadow: 0 10px 25px rgba(15,43,60,0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      color: #0f2b3c;
      cursor: pointer;
      transition: all 0.2s ease;
      z-index: 1001;
      animation: softPulse 2s infinite;
    }

    .assistant-toggle:hover {
      transform: scale(1.1);
      background: #ffb347;
    }

    @keyframes softPulse {
      0% { box-shadow: 0 0 0 0 rgba(127,195,176,0.5); }
      70% { box-shadow: 0 0 0 15px rgba(127,195,176,0); }
      100% { box-shadow: 0 0 0 0 rgba(127,195,176,0); }
    }

    .assistant-panel {
      position: fixed;
      top: 0;
      right: -400px;
      width: 360px;
      height: 100vh;
      background: rgba(255,255,255,0.85);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      box-shadow: -10px 0 40px -20px #0f2b3c;
      border-left: 2px solid rgba(127,195,176,0.3);
      padding: 2rem 1.5rem;
      transition: right 0.4s cubic-bezier(0.2, 0.9, 0.3, 1);
      z-index: 1002;
      display: flex;
      flex-direction: column;
      border-radius: 40px 0 0 40px;
    }

    .assistant-panel.open {
      right: 0;
    }

    .assistant-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.8rem;
    }

    .assistant-header h3 {
      font-weight: 700;
      color: #0f2b3c;
      display: flex;
      align-items: center;
      gap: 0.6rem;
      font-size: 1.5rem;
    }

    .assistant-header i {
      color: #7fc3b0;
      font-size: 2rem;
    }

    .close-assistant {
      background: none;
      border: none;
      font-size: 2rem;
      color: #2b5f6b;
      cursor: pointer;
      padding: 0 0.5rem;
    }

    .assistant-chat {
      flex: 1;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-bottom: 1.5rem;
      scroll-behavior: smooth;
    }

    .message {
      max-width: 90%;
      padding: 0.9rem 1.4rem;
      border-radius: 30px;
      font-size: 0.95rem;
      animation: messageAppear 0.3s ease;
      line-height: 1.4;
    }

    @keyframes messageAppear {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .assistant-message {
      align-self: flex-start;
      background: #eaf3f0;
      border-bottom-left-radius: 10px;
      color: #0f2b3c;
    }

    .user-message {
      align-self: flex-end;
      background: #7fc3b0;
      color: white;
      border-bottom-right-radius: 10px;
    }

    .typing-indicator {
      display: flex;
      gap: 0.4rem;
      padding: 0.8rem 1.2rem;
      background: #eaf3f0;
      border-radius: 30px;
      width: fit-content;
    }

    .typing-indicator span {
      width: 8px;
      height: 8px;
      background: #2b5f6b;
      border-radius: 50%;
      animation: typingBounce 1.4s infinite;
    }

    .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
    .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }

    @keyframes typingBounce {
      0%,60%,100% { transform: translateY(0); }
      30% { transform: translateY(-8px); }
    }

    .assistant-suggestions {
      background: rgba(127,195,176,0.08);
      border-radius: 30px;
      padding: 1.2rem;
      margin: 1rem 0;
    }

    .suggestion-title {
      font-weight: 600;
      margin-bottom: 0.8rem;
      color: #0f2b3c;
    }

    .suggestion-chips {
      display: flex;
      flex-wrap: wrap;
      gap: 0.6rem;
    }

    .chip {
      background: white;
      border: 1.5px solid #7fc3b0;
      border-radius: 40px;
      padding: 0.5rem 1.2rem;
      font-size: 0.9rem;
      font-weight: 500;
      color: #0f2b3c;
      cursor: pointer;
      transition: 0.2s;
    }

    .chip:hover {
      background: #7fc3b0;
      color: white;
    }

    .assistant-input-area {
      display: flex;
      gap: 0.6rem;
      margin-top: 0.5rem;
    }

    .assistant-input-area input {
      flex: 1;
      border: 2px solid rgba(127,195,176,0.4);
      border-radius: 50px;
      padding: 0.8rem 1.2rem;
      font-family: 'Outfit', sans-serif;
      background: white;
    }

    .assistant-input-area button {
      background: #7fc3b0;
      border: none;
      border-radius: 50px;
      width: 50px;
      height: 50px;
      font-size: 1.3rem;
      color: #0f2b3c;
      transition: 0.2s;
    }

    .assistant-input-area button:hover {
      background: #ffb347;
    }

    /* device recognition badge */
    .device-badge {
      background: rgba(127,195,176,0.15);
      border-radius: 40px;
      padding: 0.6rem 1.2rem;
      font-size: 0.9rem;
      display: inline-flex;
      align-items: center;
      gap: 0.6rem;
      margin-bottom: 1.5rem;
      border: 1px solid rgba(127,195,176,0.4);
    }

    .hidden {
      display: none;
    }

    /* focus highlight for assistant tips */
    .field-highlight {
      outline: 4px solid rgba(127,195,176,0.4);
      transition: outline 0.2s;
    }

    /* btn-ghost style from paths */
    .btn-ghost {
      background: transparent; border: 2px solid #2b5f6b; color: #1c2e3f; padding: 1rem 2.5rem;
      border-radius: 60px; font-weight: 600; text-decoration: none; display: inline-block;
      transition: 0.2s;
    }
    .btn-ghost:hover { background: #2b5f6b; color: white; }

    /* responsive */
    @media (max-width: 768px) {
      body.assistant-open main { padding-right: 0; }
      .assistant-panel { width: 300px; right: -320px; }
      .assistant-toggle { bottom: 1rem; right: 1rem; }
      #orb-scroll {
        bottom: 90px; /* Move up above assistant toggle on mobile */
        right: 15px;
        width: 60px;
        height: 60px;
        font-size: 1.8rem;
        z-index: 10000; /* Maintain highest z-index on mobile */
      }
    }
  </style>
</head>
<body>
  <!-- scroll orb (FIXED: now with ultra-high z-index, appears above chatbot) -->
  <div id="orb-scroll"><i class="bi bi-arrow-up-short"></i></div>

  <!-- custom navbar (exact copy from paths.html) -->
  <nav class="nav-fog">
    <div class="nav-container">
      <div class="logo-block">
        <img src="./img/Gemini_Generated_Image_4qm43u4qm43u4qm4-removebg-preview.png" alt="SkillForge Hub logo">
        <span class="logo-text"></span>
      </div>
      <button class="mobile-toggle" id="mobileToggle" aria-label="Toggle navigation menu">‚ò∞</button>
      <ul class="nav-links" id="navLinks">
        <li><a href="index.html">Home</a></li>
        <li><a href="paths.html">Paths</a></li>
        <li><a href="courses.html">Courses</a></li>
        <li><a href="mentors.html">Mentors</a></li>
        <li><a href="community.html">Community</a></li>
        <li><a href="resources.html">Resources</a></li>
      </ul>
      <div class="nav-cta"><a href="enroll-now.html">Enroll Now</a></div>
    </div>
  </nav>

  <!-- MAIN CONTENT (signin card) -->
  <main>
    <div class="signin-card" id="signinCard">
      <div class="brand-header">
        <div class="brand-icon">
          <i class="bi bi-shield-lock-fill"></i>
        </div>
        <h1>welcome back</h1>
        <div class="welcome-tag" id="welcomeTag">
          <i class="bi bi-star-fill"></i>
          <span id="greetingText">sign in to continue</span>
        </div>
      </div>

      <!-- device recognition banner (dynamic) -->
      <div id="deviceBadge" class="device-badge hidden"></div>

      <!-- returning user banner (hidden initially) -->
      <div id="returningBanner" class="returning-greeting hidden">
        <i class="bi bi-person-check-fill" style="color:#7fc3b0;"></i>
        <span id="returningMessage"></span>
      </div>

      <!-- global message (error / success) -->
      <div id="globalMessage" class="global-message hidden"></div>

      <!-- sign in form (no backend) -->
      <form id="signinForm" novalidate>
        <!-- email field -->
        <div class="input-group">
          <div class="field-container" id="emailContainer">
            <input type="email" id="email" value="" autocomplete="email" spellcheck="false">
            <label for="email">Email address</label>
            <div class="validation-feedback" id="emailFeedback"></div>
          </div>
        </div>

        <!-- password field with show/hide -->
        <div class="input-group">
          <div class="field-container" id="passwordContainer">
            <input type="password" id="password" autocomplete="current-password">
            <label for="password">Password</label>
            <button type="button" class="password-toggle" id="togglePassword" tabindex="-1" aria-label="Show password">
              <i class="bi bi-eye" id="toggleIcon"></i>
            </button>
            <div class="validation-feedback" id="passwordFeedback"></div>
          </div>
          <!-- optional strength meter (soft hint) -->
          <div class="strength-meter"><div class="strength-fill" id="strengthFill"></div></div>
        </div>

        <!-- remember me & forgot -->
        <div class="row-flex">
          <label class="checkbox-wrapper">
            <input type="checkbox" id="rememberMe" checked>
            <span>Remember me</span>
          </label>
          <a href="#" class="forgot-link" id="forgotLink">forgot password?</a>
        </div>

        <!-- sign in button with loading simulation -->
        <button type="submit" class="signin-btn" id="signinBtn">
          <span>Sign in</span>
          <i class="bi bi-arrow-right-short"></i>
        </button>

        <!-- trust badge -->
        <div class="trust-badge">
          <i class="bi bi-incognito"></i>
          <span>Your data is encrypted ¬∑ 256-bit SSL ¬∑ calm & secure</span>
        </div>

        <div class="signup-redirect">
          New to SkillForge? <a href="enroll-now.html" id="signupLink">Create an account</a>
        </div>
      </form>
    </div>

    <!-- Security Assistant Toggle & Panel -->
    <div class="assistant-toggle" id="assistantToggle" role="button" tabindex="0" aria-label="Security assistant">
      <i class="bi bi-shield-shaded"></i>
    </div>

    <div class="assistant-panel" id="assistantPanel">
      <div class="assistant-header">
        <h3><i class="bi bi-robot"></i> Security assistant</h3>
        <button class="close-assistant" id="closeAssistant" aria-label="Close assistant"><i class="bi bi-x-lg"></i></button>
      </div>

      <div class="assistant-chat" id="assistantChat">
        <div class="message assistant-message">üîê I'm your security guide. Ask me anything about signing in securely.</div>
      </div>

      <div class="assistant-suggestions">
        <div class="suggestion-title">Common questions</div>
        <div class="suggestion-chips" id="suggestionChips">
          <span class="chip" data-question="Why can't I sign in?">Can't sign in?</span>
          <span class="chip" data-question="Is my account secure?">Account security</span>
          <span class="chip" data-question="Forgot my password">Forgot password</span>
          <span class="chip" data-question="Caps lock detected?">Caps lock?</span>
        </div>
      </div>

      <div class="assistant-input-area">
        <input type="text" id="assistantInput" placeholder="Ask a question...">
        <button id="sendAssistantMsg"><i class="bi bi-send"></i></button>
      </div>
    </div>
  </main>

  <!-- FOOTER (exact copy from paths.html) -->
  <footer class="footer-fog">
    <div class="container">
      <div class="row">
        <div class="col-md-4">
          <img src="./img/Gemini_Generated_Image_4qm43u4qm43u4qm4-removebg-preview.png" style="height: 60px;" alt="SkillForge Hub logo">
          <h3 style="color: white;">SkillForge Hub</h3>
          <p>where focus meets expertise. since 2025.</p>
        </div>
        <div class="col-md-2"><h5>explore</h5><ul class="list-unstyled"><li><a href="paths.html">Paths</a></li><li><a href="#">Courses</a></li><li><a href="#">Mentors</a></li></ul></div>
        <div class="col-md-2"><h5>insight</h5><ul class="list-unstyled"><li><a href="#">Blog</a></li><li><a href="#">Research</a></li><li><a href="#">Events</a></li></ul></div>
        <div class="col-md-4"><h5>join fog newsletter</h5><p>get weekly clarity</p><input class="form-control rounded-pill" placeholder="your.email@example.com"></div>
      </div>
      <hr style="border-color: #2b5f6b;">
      <p class="text-center">¬© SkillForge Hub ‚Äî crafted for depth, not distraction.</p>
    </div>
  </footer>

  <!-- scripts -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
  <script>
(function() {
  // AOS init
  AOS.init({ duration: 800, once: true });

  // scroll orb functionality
  const orb = document.getElementById('orb-scroll');
  window.addEventListener('scroll', () => {
    if (window.scrollY > 500) orb.classList.add('visible');
    else orb.classList.remove('visible');
  });
  orb.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

  // mobile toggle
  const toggle = document.getElementById('mobileToggle');
  const links = document.getElementById('navLinks');
  if (toggle) {
    toggle.addEventListener('click', () => links.classList.toggle('show'));
  }
  document.querySelectorAll('.nav-links a').forEach(link => {
    link.addEventListener('click', () => { 
      if (links.classList.contains('show')) links.classList.remove('show'); 
    });
  });

  // ---------- AUTHENTICATION STORAGE KEYS ----------
  const STORAGE_KEYS = {
    users: 'skillforge_users',
    auth: 'skillforge_logged_in_user',
    student: 'skillforge_student',
    instructor: 'skillforge_instructor',
    remember: 'skillforge_remembered_user',
    session: 'skillforge_session',
    device: 'skillforge_device_known',
    failAttempts: 'skillforge_fail_attempts'
  };

  // DOM elements
  const emailInput = document.getElementById('email');
  const passwordInput = document.getElementById('password');
  const emailContainer = document.getElementById('emailContainer');
  const passwordContainer = document.getElementById('passwordContainer');
  const emailFeedback = document.getElementById('emailFeedback');
  const passwordFeedback = document.getElementById('passwordFeedback');
  const toggleBtn = document.getElementById('togglePassword');
  const toggleIcon = document.getElementById('toggleIcon');
  const signinBtn = document.getElementById('signinBtn');
  const signinForm = document.getElementById('signinForm');
  const globalMsg = document.getElementById('globalMessage');
  const returningBanner = document.getElementById('returningBanner');
  const returningMessage = document.getElementById('returningMessage');
  const greetingText = document.getElementById('greetingText');
  const rememberMe = document.getElementById('rememberMe');
  const forgotLink = document.getElementById('forgotLink');
  const strengthFill = document.getElementById('strengthFill');
  const deviceBadge = document.getElementById('deviceBadge');
  const signupLink = document.getElementById('signupLink');

  // Assistant elements
  const assistantToggle = document.getElementById('assistantToggle');
  const assistantPanel = document.getElementById('assistantPanel');
  const closeAssistant = document.getElementById('closeAssistant');
  const assistantChat = document.getElementById('assistantChat');
  const assistantInput = document.getElementById('assistantInput');
  const sendBtn = document.getElementById('sendAssistantMsg');
  const suggestionChips = document.querySelectorAll('.chip');
  const body = document.body;

  let rememberedEmail = localStorage.getItem(STORAGE_KEYS.remember) || '';
  let deviceKnown = localStorage.getItem(STORAGE_KEYS.device) === 'true';
  let failAttempts = parseInt(localStorage.getItem(STORAGE_KEYS.failAttempts) || '0');

  // ---------- HELPER FUNCTIONS ----------
  function getAllUsers() {
    return JSON.parse(localStorage.getItem(STORAGE_KEYS.users) || '[]');
  }

  function findUserByEmail(email) {
    const users = getAllUsers();
    return users.find(user => user.email.toLowerCase() === email.toLowerCase());
  }

  function showGlobalMessage(text, type = 'error') {
    globalMsg.innerHTML = (type === 'success' ? '<i class="bi bi-check-circle-fill"></i> ' : '<i class="bi bi-shield-exclamation"></i> ') + text;
    globalMsg.classList.remove('hidden', 'success');
    if (type === 'success') globalMsg.classList.add('success');
    globalMsg.classList.remove('hidden');
    setTimeout(() => globalMsg.classList.add('hidden'), 4000);
  }

  function addAssistantMessage(text, sender = 'assistant') {
    const msgDiv = document.createElement('div');
    msgDiv.classList.add('message', sender === 'assistant' ? 'assistant-message' : 'user-message');
    msgDiv.textContent = text;
    assistantChat.appendChild(msgDiv);
    assistantChat.scrollTop = assistantChat.scrollHeight;
  }

  function showTypingThenResponse(response) {
    const typingDiv = document.createElement('div');
    typingDiv.classList.add('typing-indicator');
    typingDiv.innerHTML = '<span></span><span></span><span></span>';
    assistantChat.appendChild(typingDiv);
    assistantChat.scrollTop = assistantChat.scrollHeight;

    setTimeout(() => {
      assistantChat.removeChild(typingDiv);
      addAssistantMessage(response, 'assistant');
    }, 1200);
  }

  function handleAssistantQuestion(question) {
    addAssistantMessage(question, 'user');
    const q = question.toLowerCase();
    if (q.includes('sign in') || q.includes('can\'t')) {
      showTypingThenResponse('Double-check your email and password. If you\'ve tried multiple times, you can reset your password ‚Äî I can help with that.');
    } else if (q.includes('secure') || q.includes('safe')) {
      showTypingThenResponse('Your connection is encrypted. We use modern safeguards and never share your data. You\'re in a safe environment.');
    } else if (q.includes('forgot') || q.includes('reset')) {
      showTypingThenResponse('Click "forgot password?" below ‚Äî we\'ll send a reset link instantly. (simulated)');
    } else if (q.includes('caps')) {
      showTypingThenResponse('I can detect caps lock. Make sure it\'s off before typing your password.');
    } else if (q.includes('new') || q.includes('account') || q.includes('sign up')) {
      showTypingThenResponse('Click "Create an account" below to start your journey with SkillForge!');
    } else {
      showTypingThenResponse('I\'m here to help with sign-in issues, security, or account access. What would you like to know?');
    }
  }

  function checkSessionExpiry() {
    const sessionTime = localStorage.getItem(STORAGE_KEYS.session);
    if (sessionTime) {
      const elapsed = Date.now() - parseInt(sessionTime);
      const oneDay = 24 * 60 * 60 * 1000;
      if (elapsed > oneDay) {
        localStorage.removeItem(STORAGE_KEYS.auth);
        localStorage.removeItem(STORAGE_KEYS.session);
        return false;
      }
    }
    return true;
  }

  // Check for existing session
  function checkExistingSession() {
    const existingUser = localStorage.getItem(STORAGE_KEYS.auth);
    if (existingUser && checkSessionExpiry()) {
      try {
        const user = JSON.parse(existingUser);
        if (user.email) {
          emailInput.value = user.email;
          handleFloat(emailContainer, emailInput);
        }
        
        returningBanner.classList.remove('hidden');
        returningMessage.innerText = `Welcome back, ${user.firstName || user.email.split('@')[0]}!`;
        greetingText.innerText = 'good to see you again';
        
        setTimeout(() => passwordInput.focus(), 500);
      } catch (e) {
        console.error('Error parsing existing user', e);
      }
    }
  }

  // Floating labels
  function handleFloat(container, input) {
    if (input.value.trim() !== '') {
      container.classList.add('float');
    } else {
      container.classList.remove('float');
    }
  }

  // Validation functions
  function validateEmail() {
    const email = emailInput.value.trim();
    const isValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    if (email === '') {
      emailFeedback.innerHTML = '';
      return false;
    } else if (!isValid) {
      emailFeedback.innerHTML = '<i class="bi bi-exclamation-triangle-fill"></i> Valid email needed';
      return false;
    } else {
      emailFeedback.innerHTML = '<i class="bi bi-check-circle-fill" style="color:#3c9b7a;"></i> Looks good';
      return true;
    }
  }

  function validatePassword() {
    const pwd = passwordInput.value;
    if (pwd === '') {
      passwordFeedback.innerHTML = '';
      return false;
    } else if (pwd.length < 6) {
      passwordFeedback.innerHTML = '<i class="bi bi-exclamation-triangle-fill"></i> At least 6 characters';
      return false;
    } else {
      passwordFeedback.innerHTML = '<i class="bi bi-check-circle-fill" style="color:#3c9b7a;"></i> Strong enough';
      return true;
    }
  }

  function updateStrength() {
    const pwd = passwordInput.value;
    let strength = 0;
    if (pwd.length >= 4) strength = 25;
    if (pwd.length >= 6) strength = 50;
    if (pwd.length >= 8 && /[^a-zA-Z0-9]/.test(pwd)) strength = 75;
    if (pwd.length >= 10 && /[A-Z]/.test(pwd) && /[0-9]/.test(pwd) && /[^a-zA-Z0-9]/.test(pwd)) strength = 100;
    if (strengthFill) strengthFill.style.width = strength + '%';
  }

  // ---------- EVENT LISTENERS ----------
  [emailInput, passwordInput].forEach(input => {
    const container = input.id === 'email' ? emailContainer : passwordContainer;
    input.addEventListener('input', () => handleFloat(container, input));
    input.addEventListener('blur', () => handleFloat(container, input));
    handleFloat(container, input);
  });

  if (toggleBtn) {
    toggleBtn.addEventListener('click', () => {
      const type = passwordInput.type === 'password' ? 'text' : 'password';
      passwordInput.type = type;
      toggleIcon.className = type === 'password' ? 'bi bi-eye' : 'bi bi-eye-slash';
    });
  }

  emailInput.addEventListener('input', validateEmail);
  passwordInput.addEventListener('input', validatePassword);
  passwordInput.addEventListener('input', updateStrength);

  // Caps lock detection
  passwordInput.addEventListener('keydown', (e) => {
    if (e.getModifierState && e.getModifierState('CapsLock')) {
      addAssistantMessage('‚ö†Ô∏è Caps lock is on ‚Äî this may affect your password', 'assistant');
    }
  });

  // Forgot password link
  if (forgotLink) {
    forgotLink.addEventListener('click', (e) => {
      e.preventDefault();
      showGlobalMessage('Password reset link sent (demo)', 'success');
      addAssistantMessage('I\'ve simulated a reset email. Check your inbox (demo).', 'assistant');
    });
  }

  // Signup link with email pre-fill
  if (signupLink) {
    signupLink.addEventListener('click', (e) => {
      e.preventDefault();
      const currentEmail = emailInput.value.trim();
      let redirectUrl = 'enroll-now.html';
      
      if (currentEmail && validateEmail()) {
        redirectUrl += '?email=' + encodeURIComponent(currentEmail);
      }
      
      showGlobalMessage('Redirecting to enrollment...', 'success');
      
      setTimeout(() => {
        window.location.href = redirectUrl;
      }, 600);
    });
  }

  // Device recognition
  if (!deviceKnown) {
    if (deviceBadge) {
      deviceBadge.classList.remove('hidden');
      deviceBadge.innerHTML = '<i class="bi bi-laptop"></i> New device detected ¬∑ security checks active';
    }
    localStorage.setItem(STORAGE_KEYS.device, 'true');
  } else {
    if (deviceBadge) {
      deviceBadge.classList.remove('hidden');
      deviceBadge.innerHTML = '<i class="bi bi-shield-check"></i> Trusted device ¬∑ connection secure';
    }
  }

  if (rememberedEmail) {
    emailInput.value = rememberedEmail;
    handleFloat(emailContainer, emailInput);
    returningBanner.classList.remove('hidden');
    returningMessage.innerText = `Welcome back, ${rememberedEmail.split('@')[0]}!`;
    greetingText.innerText = 'good to see you again';
  }

  // Check URL parameters for signup success
  const urlParams = new URLSearchParams(window.location.search);
  const justSignedUp = urlParams.get('signedup') === 'true';
  const signupEmail = urlParams.get('email');
  const expired = urlParams.get('expired') === 'true';
  const redirect = urlParams.get('redirect');

  if (expired) {
    showGlobalMessage('Your session has expired. Please sign in again.', 'error');
  }

  if (justSignedUp && signupEmail) {
    emailInput.value = decodeURIComponent(signupEmail);
    handleFloat(emailContainer, emailInput);
    showGlobalMessage('Account created successfully! Please sign in.', 'success');
    setTimeout(() => addAssistantMessage('üéâ Welcome to SkillForge! Your account is ready. Sign in to continue.', 'assistant'), 500);
    setTimeout(() => passwordInput.focus(), 800);
  }

  if (redirect === 'profile') {
    showGlobalMessage('Please sign in to view your profile', 'error');
  }

  // ---------- SIGN IN FORM SUBMISSION ----------
  signinForm.addEventListener('submit', (e) => {
    e.preventDefault();
    
    const isEmailValid = validateEmail();
    const isPasswordValid = validatePassword();
    const email = emailInput.value.trim();
    const pwd = passwordInput.value;

    if (!isEmailValid || !isPasswordValid) {
      failAttempts++;
      localStorage.setItem(STORAGE_KEYS.failAttempts, failAttempts);
      if (failAttempts >= 2) {
        addAssistantMessage('Having trouble? You can reset your password or ask me for help.', 'assistant');
      }
      showGlobalMessage('Invalid credentials ‚Äî please try again', 'error');
      return;
    }

    // Find user in database
    const user = findUserByEmail(email);
    
    if (!user) {
      showGlobalMessage('No account found with this email. Please sign up first.', 'error');
      addAssistantMessage('I couldn\'t find an account with that email. Would you like to create one?', 'assistant');
      return;
    }

    // Verify password
    try {
      const decodedPassword = atob(user.password);
      if (decodedPassword !== pwd) {
        failAttempts++;
        localStorage.setItem(STORAGE_KEYS.failAttempts, failAttempts);
        showGlobalMessage('Incorrect password. Please try again.', 'error');
        
        if (failAttempts >= 3) {
          addAssistantMessage('Multiple failed attempts. You can reset your password if you\'ve forgotten it.', 'assistant');
        }
        return;
      }
    } catch (error) {
      // If password isn't base64 encoded, try direct comparison
      if (user.password !== pwd) {
        failAttempts++;
        localStorage.setItem(STORAGE_KEYS.failAttempts, failAttempts);
        showGlobalMessage('Incorrect password. Please try again.', 'error');
        return;
      }
    }

    // SUCCESS - Create session
    const sessionData = {
      ...user,
      lastLogin: new Date().toISOString(),
      loginDevice: navigator.userAgent
    };
    
    // Remove password from session data
    delete sessionData.password;
    
    // Save to auth storage
    localStorage.setItem(STORAGE_KEYS.auth, JSON.stringify(sessionData));
    
    // Set session timestamp
    localStorage.setItem(STORAGE_KEYS.session, Date.now().toString());

    // Handle remember me
    if (rememberMe.checked) {
      localStorage.setItem(STORAGE_KEYS.remember, email);
    } else {
      localStorage.removeItem(STORAGE_KEYS.remember);
    }
    
    // Reset failed attempts
    localStorage.removeItem(STORAGE_KEYS.failAttempts);

    // Show loading state
    signinBtn.innerHTML = '<span></span><div class="spinner"></div><span> signing in</span>';
    signinBtn.disabled = true;

    // Simulate network delay then redirect to profile
    setTimeout(() => {
      signinBtn.innerHTML = '<i class="bi bi-check-lg"></i> Welcome back!';
      signinBtn.style.background = '#ffb347';
      showGlobalMessage(`Welcome back, ${user.firstName || user.email}! Redirecting...`, 'success');
      addAssistantMessage(`‚úÖ Welcome back, ${user.firstName || user.email}! Taking you to your dashboard...`, 'assistant');
      
      // Redirect to user profile
      setTimeout(() => {
        window.location.href = 'user-profile.html';
      }, 1500);
    }, 1500);
  });

  // ---------- ASSISTANT UI ----------
  if (assistantToggle) {
    assistantToggle.addEventListener('click', () => {
      assistantPanel.classList.add('open');
      body.classList.add('assistant-open');
    });
  }

  if (closeAssistant) {
    closeAssistant.addEventListener('click', () => {
      assistantPanel.classList.remove('open');
      body.classList.remove('assistant-open');
    });
  }

  if (sendBtn) {
    sendBtn.addEventListener('click', () => {
      const text = assistantInput.value.trim();
      if (!text) return;
      handleAssistantQuestion(text);
      assistantInput.value = '';
    });
  }

  if (assistantInput) {
    assistantInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') sendBtn.click();
    });
  }

  suggestionChips.forEach(chip => {
    chip.addEventListener('click', () => {
      handleAssistantQuestion(chip.getAttribute('data-question'));
    });
  });

  // Context-aware assistant
  passwordInput.addEventListener('focus', () => {
    if (assistantPanel.classList.contains('open')) {
      addAssistantMessage('‚ú® Tip: use a unique password with letters, numbers, and symbols.', 'assistant');
    }
  });

  // Check session on load
  checkSessionExpiry();
  checkExistingSession();

  // Initial assistant welcome
  setTimeout(() => {
    if (!localStorage.getItem(STORAGE_KEYS.device)) {
      addAssistantMessage('üëã I see this might be your first time on this device. I\'m here to help!', 'assistant');
    }
  }, 1000);
})();
</script>
</body>
</html>